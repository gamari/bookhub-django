{% extends 'base.html' %} 
{% load static %} 
{% load book_tags %}


{% block meta%}
  {% with first_book=selection.get_first_book %}
    <meta property="og:title" content="{{ user.username }}" />
    <meta property="og:description" content="{{user.username}}さんの本棚を見る！" />
    <meta property="og:type" content="article" />
    {% if user.profile_image%}
      <meta property="og:image" content="{{ user.profile_image.url }}" />
    {% else %}
      <meta property="og:image" content="{% static 'images/logo.png' %}" />
    {% endif %}
    
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="{{ user.username }}">
    <meta name="twitter:description" content="{{ user.username }}さんの本棚を見る！">
    {% if user.profile_image %}
      <meta name="twitter:image" content="{{ user.profile_image.url }}">
    {% else %}
      <meta name="twitter:image" content="{% static 'images/logo.png' %}">
    {% endif %}
  {% endwith %}
{% endblock %}

{% block title %} {{user.username}} {% endblock %} 

{% block css %}
  <link href="{% static 'css/components/follow.css' %}" rel="stylesheet" />
  <link href="{% static 'css/pages/user_detail.css' %}" rel="stylesheet" />
{% endblock %} 

{% block js %}
<script src="{% static 'js/services/follow/follow_user.js' %}"></script>
{% endblock %} 

{% block content %}
<section>{% include 'components/user_panel.html' %}</section>

<section>
  <div class="mb-6 user-bookshelf-title">
    <h4>{{ user.username }}さんの本棚</h4>

    <a
      href="https://twitter.com/intent/tweet?text={{ user.username }}さんの本棚をチェックしよう！&url={{ request.build_absolute_uri|urlencode }}"
      target="_blank"
      class="btn-sm btn-primary"
    >
      <i class="fa-regular fa-share-from-square"></i>
      <span>シェアする</span>
    </a>
  </div>

  {% booklist books %}
</section>
{% endblock %}
