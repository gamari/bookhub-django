{% extends 'base.html' %}

{% load static %}
{% load user_tags %}
{% load book_tags %}

{% block title %}
  セレクション詳細
{% endblock %}

{% block meta%}
  <meta property="og:image" content="https://gamari-devs.xyz/ogp/{{selection.id}}/" />
{% endblock %}

{% block css %}
  <link rel="stylesheet" href="{% static 'css/components/selection.css' %}" />
  <link rel="stylesheet" href="{% static 'css/pages/selection_detail.css' %}" />
{% endblock %}

{% block js %}
  <script src="{% static 'js/services/book/register.js' %}"></script>
  <script src="{% static 'js/pages/selection_detail.js' %}"></script>
{% endblock %}


{% block content %}
<section class="card">
    <h3>{{ selection.title }}</h3>

    <div class="selection-info">
      <div class="row-center gap-2 my-4">
        {% user_icon selection.user "sm" %}

        <div>
          <span>{{ selection.user.username }}</span>
        </div>
      </div>

      <p class="my-2 selection-description">{{ selection.description }}</p>
      
      <div class="mb-4">
        <span>
        [更新]
        </span>
        <span>{{selection.updated_at }}</span>
      </div>
    </div>

    <div class="mt-2">
      {% comment %} TODO 良いね機能を作る {% endcomment %}
      <div
        id="like-btn"
        style="color: {{ is_liked|yesno:"#FF0000,#666" }};"
      >
        <i 
          id="like-icon" 
          class="fa-regular fa-heart cursor-pointer" 
          data-liked="{{ is_liked }}" 
          data-selection-id="{{ selection.id }}" 
        
        ></i>
        <span id="like-count">
          {{ selection.total_likes }}
        </span>
      </div>
    </div>

    <div class="bookshelf mt-6">
    {% for book in selection.books.all %}
      {% book_icon book "md" user %}
    {% endfor %}
    </div>

    <div class="mt-10">
      <span class="badge">シェアする</span>

      <div class="p-4">
        {% include 'components/book_share_x.html' %}
      </div>
    </div>
</section>
{% endblock %}
